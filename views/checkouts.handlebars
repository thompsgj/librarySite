{{#section 'css'}}
	<style>
		div {
		    position: relative;
		}
		#search {
		    position: absolute;
		    top: 0;
		    left: 0;
		    z-index: 11;
		    background: transparent;
		    
		}
		#autocomplete {
		    position: absolute;    
		    top: 2px;
		    left: 1px; 
		    background: transparent;
		    z-index: 10;
		    border: 0px;
		}
	</style>
{{/section}}

<h1>Checkout</h1>


<div id="cube">aaa</div>
    <input type = "text" id = "search"/>
    <input id="autocomplete" type="text" disabled="disabled"/>

<br><br><br><br><br><br><br><br><br><br><br>


<h3>Checkout a Book</h3>
<form class="form-horizontal" role="form" action="/process-chk?form=checkout" method="POST">
	<input type="hidden" name="_csrf">
	{{!Student number}}
	<div class="form-group">
		<label>Student number</label>
		<div>
			<input type="text" class="form-control" required id="idNumber" name="id">
		</div>
	</div>
	{{!Book code}}
	<div class="form-group">
		<label>Book Code</label>
		<div>
			<input type="text" class="form-control" required id="bookCode" name="code">
		</div>
	</div>
	{{!Submit}}
	<div class="form-group">
		<div>
			<button type="submit">Submit</button>
		</div>
	</div>
</form>

<!--
<h3>Return a book</h3>
<h3>View List of Current Checkouts</h3>
{{#each chklist}}
	<div class="checkouts">
		<ul>
			<li><span class="label">Student:</span> {{student}}</li>
			<li><span class="label">Code:</span> {{code}}</li>
		</ul>
	</div>
{{/each}}

-->

{{#each bklist}}
	<div class="checkouts">
		<ul>
			<li><span class="label">Title:</span> {{title}}</li>
		</ul>
	</div>
{{/each}}
{{#section 'jcode'}}
		//Convert String Array to Array
		var bk = "{{bkarr}}";
		var bkarr = bk.split(",");

		//Convert array to lower case
		var array2 = $.map(bkarr, function(n,i){return n.toLowerCase();});

		//On key up, set value to #search
		$("#search").keyup(function(e){
    		value = $("#search").val();
    		//If value is nothing, set value to nothing
    		if(value == ""){
        		$("#autocomplete").val("");
        		return;
    		}
    		//If value is related, take the substring based on word length
	    	new_value = value.toLowerCase();
	   		$("#autocomplete").val(value);
	    	for(i = 0; i< array2.length; i++){
	       		if(array2[i].lastIndexOf(new_value, 0) === 0){
	            	if(e.keyCode == 39){
	                	$("#search").val(array2[i])
	            	}
	            	str_after = array2[i].substr(new_value.length, array2[i].length);
	            	new_str = value + str_after
	            	$("#autocomplete").val(new_str);
	            	return;
	        	}
	    	}
		});

{{/section}}
